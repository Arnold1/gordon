<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Apigateway &mdash; Gordon 0.0.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Gordon 0.0.1 documentation" href="../index.html" />
    <link rel="up" title="Event Sources" href="../eventsources.html" />
    <link rel="next" title="Dynamodb" href="dynamodb.html" />
    <link rel="prev" title="Event Sources" href="../eventsources.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="apigateway">
<h1>Apigateway<a class="headerlink" href="#apigateway" title="Permalink to this headline">¶</a></h1>
<p>Amazon API Gateway is a fully managed service that makes it easy for developers to create APIs at any scale.</p>
<p>Gordon allow you to create and integrate your Lambdas with apigateway resources in order to easily create HTTP APIs.</p>
<div class="section" id="anatomy-of-the-integration">
<span id="apigateway-anatomy"></span><h2>Anatomy of the integration<a class="headerlink" href="#anatomy-of-the-integration" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">apigateway</span><span class="p-Indicator">:</span>

  <span class="p-Indicator">{</span> <span class="nv">API_NAME</span> <span class="p-Indicator">}:</span>
    <span class="l-Scalar-Plain">description</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">API_DESCRIPTION</span> <span class="p-Indicator">}</span>
    <span class="l-Scalar-Plain">resources</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">{</span> <span class="nv">URL</span> <span class="p-Indicator">}:</span>
          <span class="l-Scalar-Plain">methods</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">LIST_OF_HTTP_METHODS</span> <span class="p-Indicator">}</span>
          <span class="l-Scalar-Plain">authorization_type</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">AUTHORIZATION_TYPE</span> <span class="p-Indicator">}</span>
          <span class="l-Scalar-Plain">responses</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">METHOD_RESPONSES</span> <span class="p-Indicator">}</span>
          <span class="l-Scalar-Plain">integration</span><span class="p-Indicator">:</span>
              <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">INTEGRATION_TYPE</span> <span class="p-Indicator">}</span>
              <span class="l-Scalar-Plain">lambda</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">LAMBDA_NAME</span> <span class="p-Indicator">}</span>
              <span class="l-Scalar-Plain">http_method</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">INTEGRATION_HTTP_METHOD</span> <span class="p-Indicator">}</span>
              <span class="l-Scalar-Plain">responses</span><span class="p-Indicator">:</span> <span class="p-Indicator">{</span> <span class="nv">INTEGRATION_RESPONSES</span> <span class="p-Indicator">}</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="api-description">
<h2>Api Description<a class="headerlink" href="#api-description" title="Permalink to this headline">¶</a></h2>
<p>Description for your API.</p>
</div>
<div class="section" id="resources">
<h2>Resources<a class="headerlink" href="#resources" title="Permalink to this headline">¶</a></h2>
<p>Map of apigateway resources with their implementations. The key name of the resources will be
the full path (url) they will have within your apigateway.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">apigateway</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">firstapi</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">description</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">My Inventory</span>
        <span class="l-Scalar-Plain">resources</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">/</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">methods</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">GET</span>
                <span class="l-Scalar-Plain">lambda</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">helloworld.index</span>
            <span class="l-Scalar-Plain">/contact/email</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">methods</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">POST</span>
                <span class="l-Scalar-Plain">lambda</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">helloworld.contact</span>
</pre></div>
</div>
<p>In this example, we have defined one API called <code class="docutils literal"><span class="pre">firstapi</span></code> with two resources: <code class="docutils literal"><span class="pre">/</span></code> and <code class="docutils literal"><span class="pre">/contact/email</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li>Each of these urls will call two different lambdas <code class="docutils literal"><span class="pre">helloworld.index</span></code> and <code class="docutils literal"><span class="pre">helloworld.contact</span></code> respectively.</li>
<li>The first url <code class="docutils literal"><span class="pre">/</span></code> will only allow <code class="docutils literal"><span class="pre">GET</span></code> requests, and the second one <code class="docutils literal"><span class="pre">/contact/email</span></code> will only allow <code class="docutils literal"><span class="pre">POST</span></code> requests.</li>
</ul>
</div></blockquote>
<p>Each of the resources can be further configured using any of the following properties.</p>
<div class="section" id="resources-url">
<h3>Resources: URL<a class="headerlink" href="#resources-url" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal"><span class="pre">URLs</span></code> are the key of the resources map. For each resource. You need to define the full path including the leading <code class="docutils literal"><span class="pre">/</span></code>.</p>
<p>If you want to make certain urls have parameters, you can do so using apigatweway syntax.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">apigateway</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">myshop</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">description</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">My Inventory API</span>
        <span class="l-Scalar-Plain">resources</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">/</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">methods</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">GET</span>
                <span class="l-Scalar-Plain">lambda</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">inventory.index</span>
            <span class="l-Scalar-Plain">/article/{article_id}</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">methods</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">POST</span>
                <span class="l-Scalar-Plain">lambda</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">inventory.article</span>
</pre></div>
</div>
<p>Your lambda called <code class="docutils literal"><span class="pre">shop.article</span></code> will receive one parameter called <code class="docutils literal"><span class="pre">article_id</span></code>.</p>
</div>
<div class="section" id="resources-methods">
<h3>Resources: Methods<a class="headerlink" href="#resources-methods" title="Permalink to this headline">¶</a></h3>
<p>List of HTTP methods you lambda will support.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">apigateway</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">example</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">description</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">My Api example</span>
        <span class="l-Scalar-Plain">resources</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">/</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">methods</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">GET</span>
                <span class="l-Scalar-Plain">lambda</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">inventory.index</span>
            <span class="l-Scalar-Plain">/get_and_post</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">methods</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">GET</span><span class="p-Indicator">,</span> <span class="nv">POST</span><span class="p-Indicator">]</span>
                <span class="l-Scalar-Plain">lambda</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">inventory.article</span>
            <span class="l-Scalar-Plain">/get_post_and_delete</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">methods</span><span class="p-Indicator">:</span>
                    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">GET</span>
                    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">POST</span>
                    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">DELETE</span>
                <span class="l-Scalar-Plain">lambda</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">inventory.article</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As shortcut, if <code class="docutils literal"><span class="pre">methods</span></code> value is a string instead of a list gordon will assume you only want one method.</p>
</div>
</div>
<div class="section" id="resources-methods-advanced">
<h3>Resources: Methods (advanced)<a class="headerlink" href="#resources-methods-advanced" title="Permalink to this headline">¶</a></h3>
<p>Methods is more than only a list of strings. The simplified version is only a shortcut in order to make gordon&#8217;s API nicer 95% of the time.</p>
<p>That version (the simplified one) should be more than enough for most of the cases, but if for some reason you want to
be able to configure different integrations for each of the methods of an url, you&#8217;ll need to do this.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">apigateway</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">exampleapi</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">description</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">My not-that-simple example</span>
    <span class="l-Scalar-Plain">resources</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">/</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">methods</span><span class="p-Indicator">:</span>
          <span class="l-Scalar-Plain">GET</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">integration</span><span class="p-Indicator">:</span>
              <span class="l-Scalar-Plain">lambda</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">app.index_on_get</span>
          <span class="l-Scalar-Plain">POST</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">integration</span><span class="p-Indicator">:</span>
              <span class="l-Scalar-Plain">lambda</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">app.index_on_post</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you use this approach, you would need to define <strong>ALL</strong> resource settings at the level of each method in your resource.</p>
</div>
</div>
<div class="section" id="authorization-type">
<h3>Authorization type<a class="headerlink" href="#authorization-type" title="Permalink to this headline">¶</a></h3>
<p>apigateway authorization type for this resouce. The only (and default) authorization type is <code class="docutils literal"><span class="pre">NONE</span></code>.</p>
</div>
</div>
<div class="section" id="full-example">
<h2>Full Example<a class="headerlink" href="#full-example" title="Permalink to this headline">¶</a></h2>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">apigateway</span><span class="p-Indicator">:</span>

    <span class="l-Scalar-Plain">helloapi</span><span class="p-Indicator">:</span>

        <span class="l-Scalar-Plain">description</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">My complex hello API</span>
        <span class="l-Scalar-Plain">resources</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">/</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">methods</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">GET</span>
                <span class="l-Scalar-Plain">integration</span><span class="p-Indicator">:</span>
                    <span class="l-Scalar-Plain">lambda</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">helloworld.sayhi</span>
            <span class="l-Scalar-Plain">/hi</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">methods</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">GET</span><span class="p-Indicator">,</span> <span class="nv">POST</span><span class="p-Indicator">]</span>
                <span class="l-Scalar-Plain">integration</span><span class="p-Indicator">:</span>
                    <span class="l-Scalar-Plain">lambda</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">helloworld.sayhi</span>

            <span class="l-Scalar-Plain">/hi/with-errors</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">method</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">GET</span>
                <span class="l-Scalar-Plain">integration</span><span class="p-Indicator">:</span>
                    <span class="l-Scalar-Plain">lambda</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">helloworld.sayhi</span>
                    <span class="l-Scalar-Plain">responses</span><span class="p-Indicator">:</span>
                        <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">code</span><span class="p-Indicator">:</span> <span class="s">&quot;404&quot;</span>
                <span class="l-Scalar-Plain">responses</span><span class="p-Indicator">:</span>
                    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">pattern</span><span class="p-Indicator">:</span> <span class="s">&quot;&quot;</span>
                      <span class="l-Scalar-Plain">code</span><span class="p-Indicator">:</span> <span class="s">&quot;404&quot;</span>

            <span class="l-Scalar-Plain">/hi/none</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">method</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">GET</span>

            <span class="l-Scalar-Plain">/hi/http</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">methods</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">GET</span>
                <span class="l-Scalar-Plain">integration</span><span class="p-Indicator">:</span>
                    <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">HTTP</span>
                    <span class="l-Scalar-Plain">uri</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">https://www.google.com</span>

            <span class="l-Scalar-Plain">/hi/mock</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">methods</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">GET</span>
                <span class="l-Scalar-Plain">integration</span><span class="p-Indicator">:</span>
                    <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">MOCK</span>

            <span class="l-Scalar-Plain">/hi/complex/</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">methods</span><span class="p-Indicator">:</span>
                    <span class="l-Scalar-Plain">GET</span><span class="p-Indicator">:</span>
                        <span class="l-Scalar-Plain">integration</span><span class="p-Indicator">:</span>
                            <span class="l-Scalar-Plain">lambda</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">helloworld.sayhi</span>
                    <span class="l-Scalar-Plain">POST</span><span class="p-Indicator">:</span>
                        <span class="l-Scalar-Plain">integration</span><span class="p-Indicator">:</span>
                            <span class="l-Scalar-Plain">lambda</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">helloworld.sayhi</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="logo"><a href="../index.html">
  <img class="logo" src="../_static/logo.png" alt="Logo"/>
</a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Apigateway</a><ul>
<li><a class="reference internal" href="#anatomy-of-the-integration">Anatomy of the integration</a></li>
<li><a class="reference internal" href="#api-description">Api Description</a></li>
<li><a class="reference internal" href="#resources">Resources</a><ul>
<li><a class="reference internal" href="#resources-url">Resources: URL</a></li>
<li><a class="reference internal" href="#resources-methods">Resources: Methods</a></li>
<li><a class="reference internal" href="#resources-methods-advanced">Resources: Methods (advanced)</a></li>
<li><a class="reference internal" href="#authorization-type">Authorization type</a></li>
</ul>
</li>
<li><a class="reference internal" href="#full-example">Full Example</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../eventsources.html">Event Sources</a><ul>
      <li>Previous: <a href="../eventsources.html" title="previous chapter">Event Sources</a></li>
      <li>Next: <a href="dynamodb.html" title="next chapter">Dynamodb</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Jorge Bastida.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="../_sources/eventsources/apigateway.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>